import{d as z,e as H,h as K,j as Y,l as Q}from"./chunk-PAS32UQI.js";import{o as V,p as q,r as G,s as J}from"./chunk-VNBHRZ5R.js";import{a as $,b as j,c as L}from"./chunk-4UJSBPAV.js";import{D as o,Fa as k,Ga as P,Ha as F,I as m,K as s,Ka as O,La as N,Na as A,R as t,S as i,T as c,Ua as R,X as I,Y as u,Ya as U,Z as d,_a as M,ea as r,fa as f,ga as x,ha as B,n as y,p as S,q as D,r as _,u as E,ua as v,v as w,va as T,wa as b}from"./chunk-OBJ3TPWI.js";function Z(n,a){if(n&1&&(t(0,"p",33),r(1),i()),n&2){let e=d();o(),B(" Logged in as: ",e.currentUser.email," (",e.currentUser.role,") ")}}function ee(n,a){if(n&1&&(t(0,"div",69)(1,"div",70),r(2),i(),t(3,"div",71),r(4,"Delivered"),i(),t(5,"div",72),r(6),i()()),n&2){let e=d().$implicit,l=d();o(2),B(" ",l.formatNumber(e.deliveryStats.delivered),"/",l.formatNumber(e.deliveryStats.totalRecipients)," "),o(4),x(" ",l.formatPercentage(e.deliveryStats.opened/e.deliveryStats.delivered*100)," opened ")}}function te(n,a){n&1&&(t(0,"span",73),r(1," Practitioners "),i())}function ie(n,a){n&1&&(t(0,"span",74),r(1," Facilities "),i())}function ne(n,a){n&1&&(t(0,"span",75),r(1," Public "),i())}function re(n,a){n&1&&(t(0,"span",76),r(1," Embassies "),i())}function ae(n,a){if(n&1&&(t(0,"span",79),r(1),i()),n&2){let e=a.$implicit;o(),x(" ",e," ")}}function oe(n,a){if(n&1&&(t(0,"div")(1,"span",41),r(2,"Professions:"),i(),t(3,"div",77),m(4,ae,2,1,"span",78),i()()),n&2){let e=d(2).$implicit;o(4),s("ngForOf",e.filters.profession)}}function le(n,a){if(n&1&&(t(0,"span",79),r(1),i()),n&2){let e=a.$implicit;o(),x(" ",e," ")}}function se(n,a){if(n&1&&(t(0,"div")(1,"span",41),r(2,"Regions:"),i(),t(3,"div",77),m(4,le,2,1,"span",78),i()()),n&2){let e=d(2).$implicit;o(4),s("ngForOf",e.filters.region)}}function de(n,a){if(n&1&&(t(0,"div")(1,"h4",49),r(2,"Applied Filters"),i(),t(3,"div",66),m(4,oe,5,1,"div",58)(5,se,5,1,"div",58),i()()),n&2){let e=d().$implicit;o(4),s("ngIf",e.filters.profession),o(),s("ngIf",e.filters.region)}}function ce(n,a){if(n&1&&(t(0,"div",60),c(1,"i",80),t(2,"div")(3,"div",62),r(4,"Scheduled"),i(),t(5,"div",63),r(6),v(7,"date"),i()()()),n&2){let e=d().$implicit;o(6),f(b(7,1,e.scheduledDate,"medium"))}}function me(n,a){if(n&1&&(t(0,"div",60),c(1,"i",81),t(2,"div")(3,"div",62),r(4,"Sent"),i(),t(5,"div",63),r(6),v(7,"date"),i()()()),n&2){let e=d().$implicit;o(6),f(b(7,1,e.sentDate,"medium"))}}function pe(n,a){if(n&1){let e=I();t(0,"button",82),u("click",function(){E(e);let p=d().$implicit,g=d();return w(g.sendBroadcast(p.id))}),c(1,"i",83),r(2,"Send Now "),i()}}function ue(n,a){if(n&1){let e=I();t(0,"button",84),u("click",function(){E(e);let p=d().$implicit,g=d();return w(g.viewAnalytics(p.id))}),c(1,"i",85),r(2,"View Analytics "),i()}}function ge(n,a){if(n&1&&(t(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"div",38),c(5,"i",39),i(),t(6,"div")(7,"h3",40),r(8),i(),t(9,"p",41),r(10),i(),t(11,"div",42)(12,"span",43),r(13),v(14,"titlecase"),i(),t(15,"span",44),r(16),v(17,"titlecase"),i()()()(),m(18,ee,7,3,"div",45),i()(),t(19,"div",46)(20,"div",47)(21,"div",48)(22,"h4",49),r(23,"Message Content"),i(),t(24,"div",50)(25,"p",51),r(26),i()(),t(27,"div",52)(28,"h4",49),r(29,"Target Audience"),i(),t(30,"div",53),m(31,te,2,0,"span",54)(32,ie,2,0,"span",55)(33,ne,2,0,"span",56)(34,re,2,0,"span",57),i()(),m(35,de,6,2,"div",58),i(),t(36,"div")(37,"div",50)(38,"h4",49),r(39,"Timeline"),i(),t(40,"div",59)(41,"div",60),c(42,"i",61),t(43,"div")(44,"div",62),r(45,"Created"),i(),t(46,"div",63),r(47),v(48,"date"),i(),t(49,"div",64),r(50),i()()(),m(51,ce,8,4,"div",65)(52,me,8,4,"div",65),i()(),t(53,"div",66),m(54,pe,3,0,"button",67)(55,ue,3,0,"button",68),i()()()()()),n&2){let e=a.$implicit,l=d();o(5),s("ngClass",l.getTypeIcon(e.type)),o(3),f(e.title),o(2),f(e.id),o(2),s("ngClass",l.getPriorityColor(e.priority)),o(),x(" ",T(14,20,e.priority)," "),o(2),s("ngClass",l.getStatusColor(e.status)),o(),x(" ",T(17,22,e.status)," "),o(2),s("ngIf",e.deliveryStats),o(8),f(e.content),o(5),s("ngIf",e.targetAudience.practitioners),o(),s("ngIf",e.targetAudience.facilities),o(),s("ngIf",e.targetAudience.public),o(),s("ngIf",e.targetAudience.embassies),o(),s("ngIf",e.filters.profession||e.filters.region),o(12),f(b(48,24,e.createdDate,"medium")),o(3),x("by ",e.createdBy,""),o(),s("ngIf",e.scheduledDate),o(),s("ngIf",e.sentDate),o(2),s("ngIf",e.status==="draft"||e.status==="scheduled"),o(),s("ngIf",e.deliveryStats)}}var h=class n{titleService=S(R);router=S(U);currentUser=null;selectedType="all";selectedStatus="all";broadcasts=[{id:"BC-2025-001",type:"multi_channel",title:"Urgent: License Renewal Deadline Reminder",content:"This is a reminder that your medical license expires on March 31, 2025. Please complete your renewal application and CPD requirements before the deadline to avoid late fees and potential suspension.",targetAudience:{practitioners:!0,facilities:!1,public:!1,embassies:!1},filters:{profession:["Medical Doctor"],status:["active"],specialty:["Cardiology","Surgery","Internal Medicine"]},priority:"urgent",scheduledDate:new Date("2025-01-20T09:00:00"),status:"scheduled",createdBy:"Communications Officer - Sarah Nambi",createdDate:new Date("2025-01-15T14:30:00")},{id:"BC-2025-002",type:"email",title:"New CPD Requirements for 2025",content:"The Medical Council has updated the Continuing Professional Development requirements for 2025. All medical practitioners must complete a minimum of 60 CPD credits, including mandatory courses in medical ethics and patient safety.",targetAudience:{practitioners:!0,facilities:!0,public:!1,embassies:!1},filters:{profession:["Medical Doctor","Nurse","Pharmacist"]},priority:"high",status:"sent",createdBy:"Policy Department - Dr. James Mukasa",createdDate:new Date("2025-01-10T10:00:00"),sentDate:new Date("2025-01-12T08:00:00"),deliveryStats:{totalRecipients:15678,delivered:15234,failed:444,opened:12456,clicked:8765}},{id:"BC-2025-003",type:"sms",title:"Emergency: Suspected Unlicensed Practitioner Alert",content:"ALERT: Dr. Michael Okello (License: UMC-UG-4789) is under investigation for suspected fraudulent credentials. Do not accept services until investigation is complete. Report any encounters to +256 414 000 000.",targetAudience:{practitioners:!1,facilities:!0,public:!0,embassies:!1},filters:{region:["Northern","Eastern"]},priority:"urgent",status:"sent",createdBy:"Investigation Unit - Inspector David Kiggundu",createdDate:new Date("2025-01-12T16:45:00"),sentDate:new Date("2025-01-12T17:00:00"),deliveryStats:{totalRecipients:25678,delivered:25234,failed:444,opened:18765,clicked:5432}}];filteredBroadcasts=[];ngOnInit(){window.scrollTo({top:0,behavior:"smooth"});let a=localStorage.getItem("isLoggedIn"),e=localStorage.getItem("currentUser");if(!a||!e){this.router.navigate(["/login"]);return}if(this.currentUser=JSON.parse(e),this.currentUser.role!=="admin"){alert("Access denied. This portal is restricted to government officials and regulators."),this.router.navigate(["/dashboard"]);return}this.titleService.setTitle("Broadcast Center - Government Portal"),this.applyFilters()}applyFilters(){this.filteredBroadcasts=this.broadcasts.filter(a=>{let e=this.selectedType==="all"||a.type===this.selectedType,l=this.selectedStatus==="all"||a.status===this.selectedStatus;return e&&l})}onTypeChange(a){this.selectedType=a,this.applyFilters()}onStatusChange(a){this.selectedStatus=a,this.applyFilters()}createBroadcast(){alert("Opening broadcast creation wizard...")}sendBroadcast(a){let e=this.broadcasts.find(l=>l.id===a);e&&(e.status="sending",e.sentDate=new Date,this.applyFilters(),setTimeout(()=>{e.status="sent",e.deliveryStats={totalRecipients:Math.floor(Math.random()*2e4)+5e3,delivered:0,failed:0,opened:0,clicked:0},e.deliveryStats.delivered=Math.floor(e.deliveryStats.totalRecipients*.97),e.deliveryStats.failed=e.deliveryStats.totalRecipients-e.deliveryStats.delivered,e.deliveryStats.opened=Math.floor(e.deliveryStats.delivered*.75),e.deliveryStats.clicked=Math.floor(e.deliveryStats.opened*.45),this.applyFilters()},3e3),alert(`Broadcast ${a} is being sent...`))}viewAnalytics(a){alert(`Viewing analytics for broadcast: ${a}`)}getStatusColor(a){switch(a){case"draft":return"bg-gray-100 text-gray-800";case"scheduled":return"bg-blue-100 text-blue-800";case"sending":return"bg-orange-100 text-orange-800";case"sent":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}getPriorityColor(a){switch(a){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getTypeIcon(a){switch(a){case"email":return"ri-mail-line";case"sms":return"ri-message-line";case"in_app":return"ri-notification-line";case"multi_channel":return"ri-broadcast-line";default:return"ri-send-plane-line"}}formatNumber(a){return new Intl.NumberFormat("en-UG").format(a)}formatPercentage(a){return`${a.toFixed(1)}%`}logout(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("currentUser"),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=D({type:n,selectors:[["app-broadcast-center"]],decls:61,vars:2,consts:[[1,"bg-white","min-h-screen"],[1,"bg-gradient-to-r","from-purple-600","to-pink-700","py-6"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between"],[1,"text-2xl","font-bold","text-white","mb-1"],[1,"text-purple-100"],["class","text-purple-200 text-sm mt-1",4,"ngIf"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-white","text-purple-600","px-4","py-2","rounded-lg","hover:bg-gray-50","transition","font-medium","text-sm",3,"click"],[1,"ri-add-line","mr-2"],[1,"bg-red-500","text-white","px-4","py-2","rounded-lg","hover:bg-red-600","transition","font-medium","text-sm",3,"click"],[1,"ri-logout-box-line","mr-2"],[1,"py-6","bg-gray-50"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"grid","md:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"w-full","px-3","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary",3,"change"],["value","all"],["value","email"],["value","sms"],["value","in_app"],["value","multi_channel"],["value","draft"],["value","scheduled"],["value","sending"],["value","sent"],["value","failed"],[1,"flex","items-end"],[1,"w-full","bg-primary","text-white","px-4","py-3","rounded-lg","hover:bg-blue-700","transition","font-medium",3,"click"],[1,"ri-refresh-line","mr-2"],[1,"py-6"],[1,"space-y-6"],["class","bg-white rounded-lg shadow-sm border",4,"ngFor","ngForOf"],[1,"text-purple-200","text-sm","mt-1"],[1,"bg-white","rounded-lg","shadow-sm","border"],[1,"p-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-purple-100","rounded-full","flex","items-center","justify-center","mr-4"],[1,"text-purple-600","text-xl",3,"ngClass"],[1,"font-semibold","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","mt-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","mr-2",3,"ngClass"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],["class","text-right",4,"ngIf"],[1,"p-6"],[1,"grid","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2"],[1,"font-medium","text-gray-800","mb-3"],[1,"bg-gray-50","rounded-lg","p-4","mb-4"],[1,"text-gray-700"],[1,"mb-4"],[1,"flex","flex-wrap","gap-2"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",4,"ngIf"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",4,"ngIf"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",4,"ngIf"],["class","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",4,"ngIf"],[4,"ngIf"],[1,"space-y-3"],[1,"flex","items-center","text-sm"],[1,"ri-add-line","text-gray-400","mr-2"],[1,"text-gray-800"],[1,"text-gray-600"],[1,"text-gray-500"],["class","flex items-center text-sm",4,"ngIf"],[1,"space-y-2"],["class","w-full bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition text-sm",3,"click",4,"ngIf"],["class","w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition text-sm",3,"click",4,"ngIf"],[1,"text-right"],[1,"text-sm","font-medium","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-green-600"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-orange-100","text-orange-800"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-purple-100","text-purple-800"],[1,"flex","flex-wrap","gap-1","mt-1"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"ri-calendar-line","text-blue-500","mr-2"],[1,"ri-send-plane-line","text-green-500","mr-2"],[1,"w-full","bg-green-500","text-white","px-4","py-2","rounded-lg","hover:bg-green-600","transition","text-sm",3,"click"],[1,"ri-send-plane-line","mr-2"],[1,"w-full","bg-blue-500","text-white","px-4","py-2","rounded-lg","hover:bg-blue-600","transition","text-sm",3,"click"],[1,"ri-bar-chart-line","mr-2"]],template:function(e,l){e&1&&(t(0,"div",0),c(1,"app-header"),t(2,"section",1)(3,"div",2)(4,"div",3)(5,"div")(6,"h1",4),r(7,"Broadcast Center"),i(),t(8,"p",5),r(9,"Send notifications to practitioners, facilities, and the public"),i(),m(10,Z,2,2,"p",6),i(),t(11,"div",7)(12,"button",8),u("click",function(){return l.createBroadcast()}),c(13,"i",9),r(14," Create Broadcast "),i(),t(15,"button",10),u("click",function(){return l.logout()}),c(16,"i",11),r(17," Logout "),i()()()()(),t(18,"section",12)(19,"div",2)(20,"div",13)(21,"div",14)(22,"div")(23,"label",15),r(24,"Message Type"),i(),t(25,"select",16),u("change",function(g){return l.onTypeChange(g.target.value)}),t(26,"option",17),r(27,"All Types"),i(),t(28,"option",18),r(29,"Email"),i(),t(30,"option",19),r(31,"SMS"),i(),t(32,"option",20),r(33,"In-App"),i(),t(34,"option",21),r(35,"Multi-Channel"),i()()(),t(36,"div")(37,"label",15),r(38,"Status"),i(),t(39,"select",16),u("change",function(g){return l.onStatusChange(g.target.value)}),t(40,"option",17),r(41,"All Statuses"),i(),t(42,"option",22),r(43,"Draft"),i(),t(44,"option",23),r(45,"Scheduled"),i(),t(46,"option",24),r(47,"Sending"),i(),t(48,"option",25),r(49,"Sent"),i(),t(50,"option",26),r(51,"Failed"),i()()(),t(52,"div",27)(53,"button",28),u("click",function(){return l.applyFilters()}),c(54,"i",29),r(55," Refresh "),i()()()()()(),t(56,"section",30)(57,"div",2)(58,"div",31),m(59,ge,56,27,"div",32),i()()(),c(60,"app-footer"),i()),e&2&&(o(10),s("ngIf",l.currentUser),o(49),s("ngForOf",l.filteredBroadcasts))},dependencies:[k,P,F,V,q,$,j,O,N],styles:[".broadcast-card[_ngcontent-%COMP%]{transition:all .3s ease}.broadcast-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.message-preview[_ngcontent-%COMP%], .delivery-stats[_ngcontent-%COMP%]{transition:all .3s ease}.priority-indicator[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}"]})};var fe=[{path:"",redirectTo:"broadcast-center",pathMatch:"full"},{path:"broadcast-center",component:h}],C=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=_({type:n});static \u0275inj=y({imports:[M.forChild(fe),M]})};var X=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=_({type:n});static \u0275inj=y({imports:[A,G,J,H,z,K,Q,Y,C,L]})};export{X as CommunicationsModule};
