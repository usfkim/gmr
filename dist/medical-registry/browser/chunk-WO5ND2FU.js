import{d as Z,e as ee,h as te,j as ie,l as ne}from"./chunk-PAS32UQI.js";import{c as q,e as J,j as W,o as K,p as H,r as Y,s as X}from"./chunk-VNBHRZ5R.js";import{a as j,b as z,c as G}from"./chunk-4UJSBPAV.js";import{D as o,Fa as L,Ga as Q,Ha as A,I as f,K as p,Ka as B,L as P,La as R,Na as U,R as t,S as i,T as c,Ua as V,X as D,Y as g,Ya as $,Z as m,_a as E,ea as a,fa as x,ga as u,ha as k,ja as N,ka as O,la as F,n as y,p as S,q as M,r as h,u as _,ua as v,v as C,va as T,wa as I}from"./chunk-OBJ3TPWI.js";function oe(s,n){if(s&1&&(t(0,"p",40),a(1),i()),s&2){let e=m();o(),k(" Logged in as: ",e.currentUser.email," (",e.currentUser.role,") ")}}function se(s,n){s&1&&(t(0,"span"),a(1,"OVERDUE"),i())}function le(s,n){if(s&1&&(t(0,"span"),a(1),i()),s&2){let e=m().$implicit,r=m();o(),u("",r.getDaysUntilDeadline(e.slaDeadline)," days left")}}function de(s,n){if(s&1&&(t(0,"div",76)(1,"h4",77),a(2,"Practitioner Involved"),i(),t(3,"div",78)(4,"div"),a(5),i(),t(6,"div"),a(7),i(),t(8,"div"),a(9),i()()()),s&2){let e=m().$implicit;o(5),u("Name: ",e.practitioner.name,""),o(2),u("License: ",e.practitioner.licenseNumber,""),o(2),u("Facility: ",e.practitioner.facility,"")}}function pe(s,n){if(s&1&&(t(0,"div")(1,"h4",60),a(2,"Assigned To"),i(),t(3,"p",48),a(4),i()()),s&2){let e=m().$implicit;o(4),x(e.assignedTo)}}function ce(s,n){if(s&1&&(t(0,"span",79),a(1),i()),s&2){let e=n.$implicit;o(),u(" ",e," ")}}function me(s,n){if(s&1){let e=D();t(0,"button",80),g("click",function(){_(e);let l=m().$implicit,d=m();return C(d.assignCase(l.id))}),c(1,"i",81),a(2,"Assign "),i()}}function ue(s,n){if(s&1){let e=D();t(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44)(4,"div",45),c(5,"i",46),i(),t(6,"div")(7,"h3",47),a(8),i(),t(9,"p",48),a(10),i(),t(11,"div",49)(12,"span",50),a(13),v(14,"titlecase"),i(),t(15,"span",51),a(16),v(17,"titlecase"),i()()()(),t(18,"div",52)(19,"div",53),f(20,se,2,0,"span",54)(21,le,2,1,"span",54),i(),t(22,"div",55),a(23),v(24,"date"),i()()()(),t(25,"div",56)(26,"p",57),a(27),i(),f(28,de,10,3,"div",58),t(29,"div",59)(30,"div")(31,"h4",60),a(32,"Reported By"),i(),t(33,"p",48),a(34),i()(),t(35,"div")(36,"h4",60),a(37,"Reported Date"),i(),t(38,"p",48),a(39),v(40,"date"),i()(),f(41,pe,5,1,"div",54),t(42,"div")(43,"h4",60),a(44,"Risk Level"),i(),t(45,"div",44)(46,"span",61),a(47),i(),t(48,"div",62),c(49,"div",63),i()()()(),t(50,"div",64)(51,"h4",65),a(52,"Evidence"),i(),t(53,"div",66),c(54,"i",67),a(55),i()(),t(56,"div",64)(57,"div",68),f(58,ce,2,1,"span",69),i()(),t(59,"div",70)(60,"button",71),g("click",function(){let l=_(e).$implicit,d=m();return C(d.viewCase(l.id))}),c(61,"i",72),a(62,"View Details "),i(),f(63,me,3,0,"button",73),t(64,"button",74),g("click",function(){let l=_(e).$implicit,d=m();return C(d.escalateCase(l.id))}),c(65,"i",75),a(66,"Escalate "),i()()()()}if(s&2){let e=n.$implicit,r=m();o(5),p("ngClass",r.getTypeIcon(e.type)),o(3),x(e.title),o(2),x(e.id),o(2),p("ngClass",r.getPriorityColor(e.priority)),o(),u(" ",T(14,24,e.priority)," "),o(2),p("ngClass",r.getStatusColor(e.status)),o(),u(" ",T(17,26,e.status)," "),o(3),p("ngClass",r.isOverdue(e.slaDeadline)?"text-red-600":r.getDaysUntilDeadline(e.slaDeadline)<=1?"text-orange-600":"text-green-600"),o(),p("ngIf",r.isOverdue(e.slaDeadline)),o(),p("ngIf",!r.isOverdue(e.slaDeadline)),o(2),u("SLA: ",I(24,28,e.slaDeadline,"short"),""),o(4),x(e.description),o(),p("ngIf",e.practitioner),o(6),x(e.reportedBy),o(5),x(I(40,31,e.reportedDate,"medium")),o(2),p("ngIf",e.assignedTo),o(5),p("ngClass",e.riskLevel>=7?"text-red-600":e.riskLevel>=4?"text-yellow-600":"text-green-600"),o(),u(" ",e.riskLevel,"/10 "),o(2),P("width",e.riskLevel*10,"%"),p("ngClass",e.riskLevel>=7?"bg-red-500":e.riskLevel>=4?"bg-yellow-500":"bg-green-500"),o(6),u(" ",e.evidence.length," item(s) "),o(3),p("ngForOf",e.tags),o(5),p("ngIf",!e.assignedTo)}}var b=class s{titleService=S(V);router=S($);currentUser=null;selectedPriority="all";selectedStatus="all";selectedType="all";searchTerm="";cases=[{id:"INV-2025-001",type:"automated_flag",priority:"critical",status:"new",title:"Duplicate National ID Detection",description:"System detected same national ID used for multiple practitioner registrations across different specialties",practitioner:{name:"Dr. John Mukasa",licenseNumber:"UMC-UG-4521",facility:"Multiple Facilities"},reportedBy:"Automated System",reportedDate:new Date("2025-01-15T09:30:00"),slaDeadline:new Date("2025-01-17T17:00:00"),evidence:[{type:"document",name:"Duplicate_ID_Analysis_Report.pdf",uploadDate:new Date("2025-01-15T09:30:00"),uploadedBy:"System"}],tags:["fraud","identity","duplicate","high-risk"],riskLevel:9,estimatedResolutionTime:48},{id:"INV-2025-002",type:"tip_off",priority:"high",status:"assigned",title:"Suspected Forged Medical Degree",description:"Anonymous tip reporting suspected forged medical degree from unrecognized international institution",practitioner:{name:"Dr. Michael Okello",licenseNumber:"UMC-UG-4789",facility:"Private Clinic - Gulu"},reportedBy:"Anonymous Whistleblower",reportedDate:new Date("2025-01-12T14:20:00"),assignedTo:"Inspector David Kiggundu",assignedDate:new Date("2025-01-13T08:00:00"),slaDeadline:new Date("2025-01-19T17:00:00"),evidence:[{type:"document",name:"Anonymous_Tip_Report.pdf",uploadDate:new Date("2025-01-12T14:20:00"),uploadedBy:"System"},{type:"photo",name:"Suspected_Certificate_Photo.jpg",uploadDate:new Date("2025-01-13T10:15:00"),uploadedBy:"Inspector David Kiggundu"}],tags:["fraud","education","forgery","international"],riskLevel:8,estimatedResolutionTime:120},{id:"INV-2025-003",type:"complaint",priority:"medium",status:"investigating",title:"Patient Complaint - Unlicensed Practice",description:"Patient complaint alleging practitioner is operating without valid license or with expired credentials",practitioner:{name:"Dr. Grace Atim",licenseNumber:"UMC-UG-4892",facility:"Atim Medical Center"},reportedBy:"Patient: Sarah Namubiru",reportedDate:new Date("2025-01-08T11:45:00"),assignedTo:"Inspector Sarah Nambi",assignedDate:new Date("2025-01-09T09:00:00"),slaDeadline:new Date("2025-01-15T17:00:00"),evidence:[{type:"witness_statement",name:"Patient_Statement_Sarah_Namubiru.pdf",uploadDate:new Date("2025-01-08T11:45:00"),uploadedBy:"Complaints Officer"},{type:"photo",name:"Facility_Inspection_Photos.zip",uploadDate:new Date("2025-01-10T14:30:00"),uploadedBy:"Inspector Sarah Nambi"}],tags:["complaint","unlicensed","patient-safety"],riskLevel:6,estimatedResolutionTime:72},{id:"INV-2025-004",type:"routine_audit",priority:"low",status:"pending_review",title:"Routine CPD Compliance Audit",description:"Quarterly audit of CPD compliance for cardiology specialists in Central region",reportedBy:"Audit Department",reportedDate:new Date("2025-01-05T08:00:00"),assignedTo:"Inspector James Ssebunya",assignedDate:new Date("2025-01-05T08:30:00"),slaDeadline:new Date("2025-01-20T17:00:00"),evidence:[{type:"document",name:"CPD_Audit_Report_Q4_2024.pdf",uploadDate:new Date("2025-01-05T16:00:00"),uploadedBy:"Inspector James Ssebunya"}],tags:["audit","cpd","compliance","cardiology"],riskLevel:3,estimatedResolutionTime:24}];filteredCases=[];inspectors=[{id:"INS-001",name:"Inspector Sarah Nambi",specialization:"Fraud Investigation",workload:5},{id:"INS-002",name:"Inspector David Kiggundu",specialization:"Document Verification",workload:3},{id:"INS-003",name:"Inspector James Ssebunya",specialization:"Compliance Audit",workload:7},{id:"INS-004",name:"Inspector Patricia Nakato",specialization:"Field Inspection",workload:4},{id:"INS-005",name:"Inspector Michael Owusu",specialization:"Cross-Border Cases",workload:2}];ngOnInit(){window.scrollTo({top:0,behavior:"smooth"});let n=localStorage.getItem("isLoggedIn"),e=localStorage.getItem("currentUser");if(!n||!e){this.router.navigate(["/login"]);return}if(this.currentUser=JSON.parse(e),this.currentUser.role!=="admin"){alert("Access denied. This portal is restricted to government officials and regulators."),this.router.navigate(["/dashboard"]);return}this.titleService.setTitle("Investigation Case Queue - Government Portal"),this.applyFilters()}applyFilters(){this.filteredCases=this.cases.filter(n=>{let e=!this.searchTerm||n.title.toLowerCase().includes(this.searchTerm.toLowerCase())||n.id.toLowerCase().includes(this.searchTerm.toLowerCase())||n.practitioner?.name.toLowerCase().includes(this.searchTerm.toLowerCase()),r=this.selectedPriority==="all"||n.priority===this.selectedPriority,l=this.selectedStatus==="all"||n.status===this.selectedStatus,d=this.selectedType==="all"||n.type===this.selectedType;return e&&r&&l&&d})}onSearchChange(){this.applyFilters()}onPriorityChange(n){this.selectedPriority=n,this.applyFilters()}onStatusChange(n){this.selectedStatus=n,this.applyFilters()}onTypeChange(n){this.selectedType=n,this.applyFilters()}viewCase(n){this.router.navigate(["/government/investigations/case",n])}assignCase(n){let e=prompt("Enter inspector ID to assign this case:");if(e){let r=this.inspectors.find(l=>l.id===e);if(r){let l=this.cases.find(d=>d.id===n);l&&(l.assignedTo=r.name,l.assignedDate=new Date,l.status="assigned",this.applyFilters(),alert(`Case ${n} assigned to ${r.name}`))}else alert("Inspector not found")}}escalateCase(n){let e=this.cases.find(r=>r.id===n);e&&(e.priority==="low"?e.priority="medium":e.priority==="medium"?e.priority="high":e.priority==="high"&&(e.priority="critical"),this.applyFilters(),alert(`Case ${n} escalated to ${e.priority} priority`))}closeCase(n){let e=prompt("Please provide a reason for closing this case:");if(e){let r=this.cases.find(l=>l.id===n);r&&(r.status="closed",this.applyFilters(),alert(`Case ${n} closed. Reason: ${e}`))}}getPriorityColor(n){switch(n){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}getStatusColor(n){switch(n){case"new":return"bg-blue-100 text-blue-800";case"assigned":return"bg-purple-100 text-purple-800";case"investigating":return"bg-orange-100 text-orange-800";case"pending_review":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getTypeIcon(n){switch(n){case"tip_off":return"ri-spy-line";case"automated_flag":return"ri-robot-line";case"complaint":return"ri-feedback-line";case"routine_audit":return"ri-file-search-line";case"cross_border":return"ri-global-line";default:return"ri-file-line"}}getDaysUntilDeadline(n){let e=new Date,r=n.getTime()-e.getTime();return Math.ceil(r/(1e3*60*60*24))}isOverdue(n){return new Date>n}formatNumber(n){return new Intl.NumberFormat("en-UG").format(n)}logout(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("currentUser"),this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=M({type:s,selectors:[["app-case-queue"]],decls:74,vars:3,consts:[[1,"bg-white","min-h-screen"],[1,"bg-gradient-to-r","from-red-600","to-pink-700","py-6"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","md:flex-row","items-start","md:items-center","justify-between"],[1,"text-2xl","font-bold","text-white","mb-1"],[1,"text-red-100"],["class","text-red-200 text-sm mt-1",4,"ngIf"],[1,"flex","items-center","space-x-3","mt-4","md:mt-0"],[1,"bg-white","text-red-600","px-4","py-2","rounded-lg","hover:bg-gray-50","transition","font-medium","text-sm"],[1,"ri-add-line","mr-2"],[1,"bg-red-800","text-white","px-4","py-2","rounded-lg","hover:bg-red-900","transition","font-medium","text-sm",3,"click"],[1,"ri-logout-box-line","mr-2"],[1,"py-6","bg-gray-50"],[1,"bg-white","rounded-lg","shadow-sm","p-6"],[1,"grid","md:grid-cols-5","gap-4"],[1,"md:col-span-2"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"ri-search-line","text-gray-400"],["type","text","placeholder","Search cases, practitioners, or case IDs...",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary",3,"ngModelChange","input","ngModel"],[1,"w-full","px-3","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary",3,"change"],["value","all"],["value","critical"],["value","high"],["value","medium"],["value","low"],["value","new"],["value","assigned"],["value","investigating"],["value","pending_review"],["value","resolved"],["value","closed"],["value","tip_off"],["value","automated_flag"],["value","complaint"],["value","routine_audit"],["value","cross_border"],[1,"py-6"],[1,"grid","lg:grid-cols-2","gap-6"],["class","bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"text-red-200","text-sm","mt-1"],[1,"bg-white","rounded-lg","shadow-sm","border","hover:shadow-md","transition-shadow"],[1,"p-6","border-b","border-gray-200"],[1,"flex","items-start","justify-between"],[1,"flex","items-center"],[1,"w-12","h-12","bg-red-100","rounded-full","flex","items-center","justify-center","mr-4"],[1,"text-red-600","text-xl",3,"ngClass"],[1,"font-semibold","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","mt-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","mr-2",3,"ngClass"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-right"],[1,"text-sm","font-medium",3,"ngClass"],[4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"p-6"],[1,"text-gray-600","mb-4"],["class","bg-gray-50 rounded-lg p-3 mb-4",4,"ngIf"],[1,"grid","md:grid-cols-2","gap-4","mb-4"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-sm","font-medium","mr-2",3,"ngClass"],[1,"w-16","bg-gray-200","rounded-full","h-2"],[1,"h-2","rounded-full",3,"ngClass"],[1,"mb-4"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","text-sm","text-gray-600"],[1,"ri-folder-line","mr-2"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"flex-1","bg-blue-500","text-white","px-3","py-2","rounded","text-sm","hover:bg-blue-600","transition",3,"click"],[1,"ri-eye-line","mr-1"],["class","flex-1 bg-green-500 text-white px-3 py-2 rounded text-sm hover:bg-green-600 transition",3,"click",4,"ngIf"],[1,"bg-orange-500","text-white","px-3","py-2","rounded","text-sm","hover:bg-orange-600","transition",3,"click"],[1,"ri-arrow-up-line","mr-1"],[1,"bg-gray-50","rounded-lg","p-3","mb-4"],[1,"font-medium","text-gray-800","mb-2"],[1,"text-sm","text-gray-600","space-y-1"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"flex-1","bg-green-500","text-white","px-3","py-2","rounded","text-sm","hover:bg-green-600","transition",3,"click"],[1,"ri-user-add-line","mr-1"]],template:function(e,r){e&1&&(t(0,"div",0),c(1,"app-header"),t(2,"section",1)(3,"div",2)(4,"div",3)(5,"div")(6,"h1",4),a(7,"Investigation Case Queue"),i(),t(8,"p",5),a(9,"Manage investigations, field inspections, and compliance cases"),i(),f(10,oe,2,2,"p",6),i(),t(11,"div",7)(12,"button",8),c(13,"i",9),a(14," New Case "),i(),t(15,"button",10),g("click",function(){return r.logout()}),c(16,"i",11),a(17," Logout "),i()()()()(),t(18,"section",12)(19,"div",2)(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",16)(24,"div",17),c(25,"i",18),i(),t(26,"input",19),F("ngModelChange",function(d){return O(r.searchTerm,d)||(r.searchTerm=d),d}),g("input",function(){return r.onSearchChange()}),i()()(),t(27,"div")(28,"select",20),g("change",function(d){return r.onPriorityChange(d.target.value)}),t(29,"option",21),a(30,"All Priorities"),i(),t(31,"option",22),a(32,"Critical"),i(),t(33,"option",23),a(34,"High"),i(),t(35,"option",24),a(36,"Medium"),i(),t(37,"option",25),a(38,"Low"),i()()(),t(39,"div")(40,"select",20),g("change",function(d){return r.onStatusChange(d.target.value)}),t(41,"option",21),a(42,"All Statuses"),i(),t(43,"option",26),a(44,"New"),i(),t(45,"option",27),a(46,"Assigned"),i(),t(47,"option",28),a(48,"Investigating"),i(),t(49,"option",29),a(50,"Pending Review"),i(),t(51,"option",30),a(52,"Resolved"),i(),t(53,"option",31),a(54,"Closed"),i()()(),t(55,"div")(56,"select",20),g("change",function(d){return r.onTypeChange(d.target.value)}),t(57,"option",21),a(58,"All Types"),i(),t(59,"option",32),a(60,"Tip-off"),i(),t(61,"option",33),a(62,"Automated Flag"),i(),t(63,"option",34),a(64,"Complaint"),i(),t(65,"option",35),a(66,"Routine Audit"),i(),t(67,"option",36),a(68,"Cross-Border"),i()()()()()()(),t(69,"section",37)(70,"div",2)(71,"div",38),f(72,ue,67,34,"div",39),i()()(),c(73,"app-footer"),i()),e&2&&(o(10),p("ngIf",r.currentUser),o(16),N("ngModel",r.searchTerm),o(46),p("ngForOf",r.filteredCases))},dependencies:[L,Q,A,K,H,q,J,W,j,z,B,R],styles:[".case-card[_ngcontent-%COMP%]{transition:all .3s ease}.case-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a}.priority-indicator[_ngcontent-%COMP%]{position:relative}.priority-critical[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.sla-indicator[_ngcontent-%COMP%]{transition:all .3s ease}.sla-overdue[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_blink{0%,50%{opacity:1}51%,to{opacity:.5}}.evidence-count[_ngcontent-%COMP%]{transition:all .3s ease}.evidence-count[_ngcontent-%COMP%]:hover{color:var(--primary)}.tag-item[_ngcontent-%COMP%]{transition:all .3s ease}.tag-item[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:var(--primary);color:#fff}.action-button[_ngcontent-%COMP%]{transition:all .3s ease}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #00000026}.risk-bar[_ngcontent-%COMP%]{transition:width .5s ease-in-out}@media (max-width: 768px){.case-card[_ngcontent-%COMP%]{margin-bottom:16px}.action-button[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}}"]})};var ge=[{path:"",redirectTo:"queue",pathMatch:"full"},{path:"queue",component:b}],w=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=h({type:s});static \u0275inj=y({imports:[E.forChild(ge),E]})};var re=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=h({type:s});static \u0275inj=y({imports:[U,Y,X,ee,Z,te,ne,ie,w,G]})};export{re as InvestigationsModule};
